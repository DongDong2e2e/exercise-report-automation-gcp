# 🤖 AI 기반 운동일지 자동 분석 및 리포팅 시스템
  
Google Sheets에 텍스트로 작성된 운동일지를 AI가 자동으로 분석하여 정형화하고, 주간/월간/분기/연간 단위의 심층 분석 리포트와 맞춤형 운동 루틴을 이메일로 보내주는 자동화 프로젝트입니다.

### 🎥 주요 기능 시연 (GIF/동영상 추가)
*   **이메일 리포트 예시 (스크린샷)**
*   **챗봇 기능 사용 모습 (GIF)**
*   **Raw 데이터가 Structured 데이터로 변환되는 과정 (GIF)**

### ✨ 주요 기능 (Features)
*   **자동 데이터 정형화:** 비정형 텍스트(.txt) 형식의 운동 기록을 정형 데이터로 자동 파싱 및 변환
*   **AI 기반 심층 분석:** Gemini API를 활용한 4단계 추론 아키텍처를 통해 데이터 분석, 인사이트 도출, 루틴 추천
*   **주기적 리포트 발송:** 트리거를 통해 주간, 월간, 분기, 연간 리포트를 자동으로 이메일(HTML) 발송
*   **대화형 챗봇:** 사용자가 자연어로 자신의 운동 기록에 대해 질문하고 답변받을 수 있는 웹 앱 인터페이스 제공

### 🛠️ 기술 스택 (Tech Stack)
*   **Backend:** Google Apps Script (JavaScript)
*   **AI:** Google Gemini 2.5 Pro
*   **Database:** Google Sheets
*   **Frontend:** HTML, CSS, JavaScript (for Chatbot UI)

### 🏗️ 시스템 아키텍처
1.  **데이터 입력:** 사용자가 Google Sheets에 텍스트로 운동일지 기록
2.  **데이터 파싱 (onEdit):** Apps Script가 `onEdit` 트리거를 통해 변경을 감지하고, Regex를 활용해 데이터를 파싱하여 'structured_log' 시트에 저장
3.  **리포트 생성 (Time-based):** 정해진 시간(매주 월요일 등)에 트리거가 작동하여 `sendReport` 함수 실행
    *   **1단계 (분석):** 해당 기간의 운동 데이터 및 인바디 데이터 분석
    *   **2단계 (추론):** Gemini API를 호출하여 과거 데이터 요약 → 현재 데이터와 비교 분석 → 맞춤형 루틴 생성 → 최종 HTML 리포트 생성의 4단계 추론 실행
4.  **이메일 발송:** 생성된 HTML 리포트를 `MailApp`을 통해 사용자에게 발송
5.  **챗봇 상호작용 (WebApp):**
    *   사용자가 `index.html` UI에서 질문 입력
    *   `processUserMessage` 함수가 Gemini를 통해 질문 의도를 파악하고 필요한 내부 도구(운동기록 검색, 인바디 검색)를 결정
    *   내부 도구가 Sheets에서 데이터를 검색한 후, 그 결과를 다시 Gemini에 전달하여 최종 답변 생성
---
### 🚀 시작하기 (Setup)

이 프로젝트를 직접 실행해보려면 다음 단계를 따라 설정해야 합니다.

1.  이 코드를 Google Apps Script에 복사하여 새 프로젝트를 생성합니다.
2.  Apps Script 편집기의 왼쪽 메뉴에서 **프로젝트 설정(⚙️)**으로 이동합니다.
3.  **스크립트 속성(Script Properties)** 섹션에 아래 3개의 속성과 값을 추가하고 저장합니다.

| 속성 (Property)              | 설명                                        |
| :--------------------------- | :------------------------------------------ |
| `GEMINI_API_KEY`             | 본인의 Google Gemini API 키                 |
| `REPORT_RECIPIENT_EMAIL`     | 리포트를 수신할 본인의 이메일 주소          |
| `USER_NAME`                  | 리포트에 표시될 이름                        |

4.  `setup()` 함수를 최초 1회 실행하여 필요한 시트와 트리거를 설정합니다.
